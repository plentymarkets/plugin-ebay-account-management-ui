<!-- TOOLBAR -->
<terra-base-toolbar>
    <div class="btn-group" role="group">
        <terra-button
                inputIcon="icon-plugin_productive icon_dist_top"
                inputTooltipText="{{'addCredentialsProduction' | translate:lang}}"
                inputTooltipPlacement="bottom"
                (outputClicked)="openAuthenticationPopup('production')">
        </terra-button>
        <terra-button
                inputIcon="icon-debug icon_dist_top"
                inputTooltipText="{{'addCredentialsSandbox' | translate:lang}}"
                inputTooltipPlacement="bottom"
                (outputClicked)="openAuthenticationPopup('sandbox')">
        </terra-button>
    </div>
</terra-base-toolbar>

<div class="container-fluid">
    <div class="row">
        <!-- CREDENTIALS INFOBOXES -->
        <template ngFor let-credentials let-infoBoxId="index" [ngForOf]="credentialsList">
            <div class="col-xs-12 col-md-6 col-lg-3">
                <terra-info-box #{{infoBoxId}}>
                    <div body>
                        <div [hidden]="isAccountInputActive">
                            <terra-text-input
                                    inputName="{{'account' | translate:lang}}"
                                    [(ngModel)]="credentials.data.userId">
                            </terra-text-input>
                        </div>

                        <div [hidden]="!isAccountInputActive">
                            <b>{{'account' | translate:lang}}:</b> {{credentials.data.userId}}<br>
                        </div>

                        <b>{{'environment' | translate:lang}}:</b> {{credentials.environment | translate:lang}}<br>
                        <b>{{'status' | translate:lang}}:</b> {{credentials.status | translate:lang}}<br>
                        <b>{{'expiration' | translate:lang}}:</b> {{credentials.data.refreshTokenExpiration}}<br>
                        <b>{{'createdAt' | translate:lang}}:</b> {{credentials.createdAt}}
                    </div>
                    <div buttons>
                        <terra-button
                                inputIcon="icon-edit icon_dist_top"
                                inputTooltipText="{{'edit' | translate:lang}}"
                                inputTooltipPlacement="bottom"
                                [hidden]="!isAccountInputActive"
                                (outputClicked)="toggleAccountInput(infoBoxId)">
                        </terra-button>
                        <terra-button
                                inputIcon="icon-save icon_dist_top"
                                inputTooltipText="{{'save' | translate:lang}}"
                                inputTooltipPlacement="bottom"
                                [hidden]="isAccountInputActive"
                                (outputClicked)="saveCredentials(credentials)">
                        </terra-button>
                        <terra-button
                                inputIcon="icon-refresh icon_dist_top"
                                inputTooltipText="{{'refresh' | translate:lang}}"
                                inputTooltipPlacement="bottom"
                                (outputClicked)="refreshCredentialsToken(credentials)">
                        </terra-button>
                        <terra-button
                                inputIcon="icon-delete icon_dist_top"
                                inputTooltipText="{{'remove' | translate:lang}}"
                                inputTooltipPlacement="bottom"
                                (outputClicked)="removeCredentials(credentials)">
                        </terra-button>
                    </div>
                </terra-info-box>
            </div>
        </template>
    </div>
</div>
